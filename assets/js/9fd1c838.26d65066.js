"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[359],{3905:(e,t,n)=>{n.r(t),n.d(t,{MDXContext:()=>d,MDXProvider:()=>u,mdx:()=>g,useMDXComponents:()=>c,withMDXComponents:()=>p});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=o.createContext({}),p=function(e){return function(t){var n=c(t.components);return o.createElement(e,i({},t,{components:n}))}},c=function(e){var t=o.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return o.createElement(d.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},f=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,a=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(n),u=r,f=p["".concat(a,".").concat(u)]||p[u]||m[u]||i;return n?o.createElement(f,s(s({ref:t},d),{},{components:n})):o.createElement(f,s({ref:t},d))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var d=2;d<i;d++)a[d]=n[d];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}f.displayName="MDXCreateElement"},43204:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>c});var o=n(83117),r=n(80102),i=(n(67294),n(3905)),a=["components"],s={id:"android",title:"Troubleshooting Android Issues",sidebar_label:"Android Issues",custom_edit_url:"https://www.internalfb.com/intern/diffusion/FBS/browsefile/master/xplat/sonar/docs/getting-started/troubleshooting/android.mdx"},l=void 0,d={unversionedId:"getting-started/troubleshooting/android",id:"getting-started/troubleshooting/android",title:"Troubleshooting Android Issues",description:"Flipper is a 'work in progress' and issues may occur. This page contains known issues associated with the Android platform and provides steps you can take to try to resolve them.",source:"@site/../docs/getting-started/troubleshooting/android.mdx",sourceDirName:"getting-started/troubleshooting",slug:"/getting-started/troubleshooting/android",permalink:"/docs/getting-started/troubleshooting/android",draft:!1,editUrl:"https://www.internalfb.com/intern/diffusion/FBS/browsefile/master/xplat/sonar/docs/getting-started/troubleshooting/android.mdx",tags:[],version:"current",frontMatter:{id:"android",title:"Troubleshooting Android Issues",sidebar_label:"Android Issues",custom_edit_url:"https://www.internalfb.com/intern/diffusion/FBS/browsefile/master/xplat/sonar/docs/getting-started/troubleshooting/android.mdx"},sidebar:"main",previous:{title:"General Issues",permalink:"/docs/getting-started/troubleshooting/general"},next:{title:"iOS Issues",permalink:"/docs/getting-started/troubleshooting/ios"}},p={},c=[{value:"Stuck in &quot;Currently Connecting...&quot;",id:"stuck-in-currently-connecting",level:2},{value:"In-app diagnostics",id:"in-app-diagnostics",level:2},{value:"Exception from call site #4 bootstrap method",id:"exception-from-call-site-4-bootstrap-method",level:2},{value:"Duplicate class <code>com.facebook.jni.*</code>",id:"duplicate-class-comfacebookjni",level:2}],u=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",t)}},m=u("InternalAndroid"),f=u("OssOnly"),g={toc:c};function h(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.mdx)("wrapper",(0,o.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("p",null,"Flipper is a 'work in progress' and issues may occur. This page contains known issues associated with the Android platform and provides steps you can take to try to resolve them."),(0,i.mdx)(m,{mdxType:"InternalAndroid"}),(0,i.mdx)("h2",{id:"stuck-in-currently-connecting"},'Stuck in "Currently Connecting..."'),(0,i.mdx)("p",null,"There are sadly many non-deterministic reasons why Flipper may not be able to connect. It can often help to restart all pieces related to the connection:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Kill the app on the emulator and restart it."),(0,i.mdx)("li",{parentName:"ul"},"Restart the emulator."),(0,i.mdx)("li",{parentName:"ul"},"Restart adb with ",(0,i.mdx)("inlineCode",{parentName:"li"},"adb kill-server && adb start-server"),"."),(0,i.mdx)("li",{parentName:"ul"},"The nuclear option: Restart your computer (especially when USB connectivity is involved)")),(0,i.mdx)(f,{mdxType:"OssOnly"},(0,i.mdx)("h2",{id:"in-app-diagnostics"},"In-app diagnostics"),(0,i.mdx)("p",null,"The Flipper SDK includes an in-app connection diagnostics screen to help you diagnose problems."),(0,i.mdx)("p",null,"Replace ",(0,i.mdx)("inlineCode",{parentName:"p"},"<APP_PACKAGE>")," below with the package name of your app, for example, such as ",(0,i.mdx)("inlineCode",{parentName:"p"},"com.facebook.flipper.sample"),"."),(0,i.mdx)("p",null,"On a terminal, run the following:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"adb shell am start -n <APP_PACKAGE>/com.facebook.flipper.android.diagnostics.FlipperDiagnosticActivity\n")),(0,i.mdx)("p",null,"This will only work if you added ",(0,i.mdx)("inlineCode",{parentName:"p"},"FlipperDiagnosticActivity")," to your ",(0,i.mdx)("inlineCode",{parentName:"p"},"AndroidManifest.xml"),". See ",(0,i.mdx)("a",{parentName:"p",href:"/docs/getting-started/android-native#diagnostics"},"getting started")," for help."),(0,i.mdx)("h2",{id:"exception-from-call-site-4-bootstrap-method"},"Exception from call site #4 bootstrap method"),(0,i.mdx)("p",null,"Build error after including the Flipper dependency:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"Exception from call site #4 bootstrap method\n")),(0,i.mdx)("p",null,"This can happen because we include ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/square/okhttp/issues/4597#issuecomment-461204144"},"OkHttp3")," as dependency which makes use of Java 8 features. There are two ways of dealing with this:"),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Enable Java 8 support")),(0,i.mdx)("p",null,"Add this to your Gradle config:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-groovy"},'android {\n  compileOptions {\n    targetCompatibility = "8"\n    sourceCompatibility = "8"\n   }\n }\n')),(0,i.mdx)("p",null," ",(0,i.mdx)("strong",{parentName:"p"},"Exclude the OkHttp3 dependency")),(0,i.mdx)("p",null," Alternatively, if you don't plan on making use of OkHttp, you can exclude the dependency from the build entirely:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"debugImplementation('com.facebook.flipper:flipper:*') {\n exclude group: 'com.squareup.okhttp3'\n}\n")),(0,i.mdx)("h2",{id:"duplicate-class-comfacebookjni"},"Duplicate class ",(0,i.mdx)("inlineCode",{parentName:"h2"},"com.facebook.jni.*")),(0,i.mdx)("p",null,"This can occur when mixing different versions of ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/facebookincubator/fbjni"},"FBJNI"),", a library we use to interact with native C++ code."),(0,i.mdx)("p",null,"Speficially, this can happen when the versions ",(0,i.mdx)("inlineCode",{parentName:"p"},"0.0.x")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"0.1.x")," are mixed. Version ",(0,i.mdx)("inlineCode",{parentName:"p"},"0.1.0")," of FBJNI switched to using ",(0,i.mdx)("a",{parentName:"p",href:"https://google.github.io/prefab/"},"Google Prefab"),' for distributing native artifacts, which made the split into combined, "java-only" and "header" packages redundant and only requires a single dependency in your projects.'),(0,i.mdx)("p",null,'When including both "fbjni-java-only:0.0.1" and "fbjni:0.1.0" in one project, you will now duplicate class errors during the build process. You must ensure that only one of the two versions is used in your entire dependency tree. Start by looking at ',(0,i.mdx)("inlineCode",{parentName:"p"},"./gradlew :myapp:dependencies")," to see where the different version requirements come from. Then exclude the FBJNI dependency from one of them, as follows:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-groovy"},"implementation(\"com.facebook.react:react-native:+\") {\n    exclude group:'com.facebook.fbjni'\n}\n"))))}h.isMDXComponent=!0}}]);